# [Request](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java) Structure

+ Request is the primary Object to be dealt with to implement the logic of a generated Vangav Backend REST Service in controllers' Handler classes like in [vos_calculate_sum](https://github.com/vangav/vos_calculate_sum/blob/master/app/com/vangav/vos_calculate_sum/controllers/calculate_sum/HandlerCalculateSum.java#L67) and [vos_geo_server](https://github.com/vangav/vos_geo_server/blob/master/app/com/vangav/vos_geo_server/controllers/reverse_geo_code/HandlerReverseGeoCode.java#L77). Here's an index for the public methods provided by [Request](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java) class:

| method | explanation |
| ------ | ----------- |
| [`getStartTime`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L111) | Returns the unix time stamp (milliseconds since epoch) when processing this request started. |
| [`getStartCalendar`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L120) | Returns a Calendar Object reflecting when processing this request started. |
| [`endRequest`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L131) | *Call this method only if you are sure you need it.* This method gets automatically called upon sending back the request's response which sets the request's [`endTime`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L54) and [`execTime`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L55). |
| [`getEndTime`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L141) | Returns the unix time stamp when the request's response was sent. Usually only useful to call in after-response methods such as [`afterProcessing`](https://github.com/vangav/vos_geo_server/blob/master/app/com/vangav/vos_geo_server/controllers/CommonPlayHandler.java#L64). |
| [`getExecTime`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L150) | Returns the number of milliseconds it took from receiving the request till sending back the response. |
| [`getRequestId`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L155) | Each request gets a UUID. Can be used in many ways (e.g.: logging, tracing exceptions, etc ...). |
| [`getRequestHeader`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L164) | Returns a [RequestHeader](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/RequestHeader.java) Object offering [`getRemoteAddress`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/RequestHeader.java#L69), [`getRequestType`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/RequestHeader.java#L78), [`getUserAgent`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/RequestHeader.java#L87), [`getHttpAccept`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/RequestHeader.java#L96) and [`getHeaders`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/RequestHeader.java#L105). |
| [`getRequestJsonBody`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L173) | Returns a [RequestJsonBody](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/RequestJsonBody.java) Object (cast it to controller's Request Object) offering [`getUserId`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/RequestJsonBody.java#L84) which should be overriden per-controller's request in case the request has a user-uuid as one of its params and [`isValidParam`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/RequestJsonBody.java#L203) which is used to check if an optional param is valid or not. |
| [`getResponseBody`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L182) | Returns a [ResponseBody](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/response/ResponseBody.java) Object (cast it to controller's Response Object). Used to set response's params at the end of each controller-handler's [`processRequest`](https://github.com/vangav/vos_geo_server/blob/master/app/com/vangav/vos_geo_server/controllers/reverse_geo_code/HandlerReverseGeoCode.java#L98) method. |
| [`getDispatcher`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L191) | Returns a [Dispatcher](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/dispatcher/Dispatcher.java) Object offering [`addDispatchMessage`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/dispatcher/Dispatcher.java#L172) used to enqueue dispatch messages any time during the request processing (before and after response) and those messages get dispatched automatically at the end of processing a request. To use this functionality a service has to have a worker service too (just enter **`Y`** during service generation when asked to add add a worker service. Then make sure to run this worker service as well as the main service. |
| [`getControllerName`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L200) | Returns the controller's name. Can be used for logging, analysis, etc ... |
| [`setUserId`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L212) | For example on new user signup this method is used to set the new user's uuid. |
| [`getUserId`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L222) | Used to get the uuid of the user issuing the request if the uuid was already set through overriding [`getUserId`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/RequestJsonBody.java#L84) or invoking [`setUserId`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L212), otherwise it returns the default [`uuid`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/RequestJsonBody.java#L75).  |
| [`getState`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L258) | Invoking this method in any after-response method returns the request's state ([`OK`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/RequestState.java#L40), [`BAD_REQUEST`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/RequestState.java#L41), [`INTERNAL_SERVER_ERROR`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/RequestState.java#L42)). Can be used for logging, analysis, etc ... |
| [`getVangavExceptions`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L280) [`getTheLastVangavException`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L292) [`getExceptions`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L318) [`getTheLastException`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L329) [`getAllExceptionsAsString`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L345) | Are used to log/analyze/report problems. Usually combined with other methods like `getRequestId`, `getUserId`, `getState`, etc ... to track problems as they occur. |
| [`addVangavException`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L269) [`addException`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L308) | Any thrown Exception gets automatically added to the request's exceptions through these methods, however calling these methods can be useful for caught non-fatal exceptions thrown by the service's logic written by you. Any exception thrown by Vangav Backend gets added to the request's exceptions automatically. |
