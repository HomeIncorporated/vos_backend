
> **why?** play framework powers linkedin's 500,000,000 members backend; it makes it easy to build web applications

> vangav backend generated services add 100% of the play-framwork-code and tunes it for high performance and big scale; generated services offers a multitude of features on top of play framework as explained in this tutorial

# play framework

### structure

| pkg/class | explanation |
| --------- | ----------- |
| [ParentPlayHandler](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/ParentPlayHandler.java) | is the root class for handling all incoming requests to a vangav backend service where execution starts at [`handleRequestAsync`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/ParentPlayHandler.java#L232) |
| **pkg: [param](https://github.com/vangav/vos_backend/tree/master/src/com/vangav/backend/play_framework/param)** | represents requests' params and handles their parsing and validation |
| [ParamType](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/param/ParamType.java) | an enum representing supported request param types like [`ACCESS_TOKEN`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/param/ParamType.java#L89), [`EMAIL`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/param/ParamType.java#L92), [`PHONE_NUMBER`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/param/ParamType.java#L94), ... |
| [ParamOptionality](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/param/ParamOptionality.java) | is an enum used to distinguish between mandatory and optional requests' params |
| [ParamValidatorInl](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/param/ParamValidatorInl.java) | has the inline static methods for validating requests' params |
| [ParamValidatorProperties](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/param/ParamValidatorProperties.java) | maps [param_validator_properties.prop](https://github.com/vangav/vos_backend/blob/master/prop/param_validator_properties.prop) properties file defining how some params get validated like a photo's size |
| [ParamParsersInl](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/param/ParamParsersInl.java) | handles requests' params parsing like parsing an incoming date `string` into a `date` object |
| **pkg: [request](https://github.com/vangav/vos_backend/tree/master/src/com/vangav/backend/play_framework/request)** | represents incoming requests' objects (header, params, state, thrown exceptions, dispatch queue, ...) as well as handling building a response for each request |
| [Request](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java) | is the main class to deal with as explained in depth later in this tutorial; it holds objects from all other classes under this package |
| []() |  |
| []() |  |
| []() |  |
| []() |  |















+ This package is responsible for:
  + For every Vangav Backend generated RESTful service, [controllers_generator](https://github.com/vangav/vos_backend/tree/master/src/com/vangav/backend/play_framework/controllers_generator) handles validating [config file](https://github.com/vangav/vos_geo_server/blob/master/generator_config/controllers.json) as well as generating [Controller](https://github.com/vangav/vos_geo_server/blob/master/app/com/vangav/vos_geo_server/controllers/reverse_geo_code/ControllerReverseGeoCode.java), [Handler](https://github.com/vangav/vos_geo_server/blob/master/app/com/vangav/vos_geo_server/controllers/reverse_geo_code/HandlerReverseGeoCode.java), [Request](https://github.com/vangav/vos_geo_server/blob/master/app/com/vangav/vos_geo_server/controllers/reverse_geo_code/RequestReverseGeoCode.java) and [Response](https://github.com/vangav/vos_geo_server/blob/master/app/com/vangav/vos_geo_server/controllers/reverse_geo_code/ResponseReverseGeoCode.java) classes per-entry-point.
  + [ParentPlayHandler](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/ParentPlayHandler.java) controls the sequential processing from reciving a request, returning a response and handling after-response operations (if any/enabled). Processing starts at [`handleRequestAsync`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/ParentPlayHandler.java#L232) and ends in [`afterResponse`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/ParentPlayHandler.java#L612). ParentPlayHandler is also the parent class for all the entry points' [Handler](https://github.com/vangav/vos_geo_server/blob/master/app/com/vangav/vos_geo_server/controllers/reverse_geo_code/HandlerReverseGeoCode.java) classes.

### [controllers_generator](https://github.com/vangav/vos_backend/tree/master/src/com/vangav/backend/play_framework/controllers_generator)

| Class | Explanation |
| ----- | ----------- |
| [ControllersGeneratorConstantsInl](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/controllers_generator/ControllersGeneratorConstantsInl.java) | Holds this sub-package's constants. |
| [ControllersParserInl](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/controllers_generator/ControllersParserInl.java) | Has inline static methods for parsing items out of a [controllers.json](https://github.com/vangav/vos_geo_server/blob/master/generator_config/controllers.json) file. |
| [ControllersVerifierInl](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/controllers_generator/ControllersVerifierInl.java) | Is used to verify a [controllers.json](https://github.com/vangav/vos_geo_server/blob/master/generator_config/controllers.json) file. |
| [ControllersGeneratorInl](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/controllers_generator/ControllersGeneratorInl.java) | Handles the generation of [Controller](https://github.com/vangav/vos_geo_server/blob/master/app/com/vangav/vos_geo_server/controllers/reverse_geo_code/ControllerReverseGeoCode.java), [Handler](https://github.com/vangav/vos_geo_server/blob/master/app/com/vangav/vos_geo_server/controllers/reverse_geo_code/HandlerReverseGeoCode.java), [Request](https://github.com/vangav/vos_geo_server/blob/master/app/com/vangav/vos_geo_server/controllers/reverse_geo_code/RequestReverseGeoCode.java) and [Response](https://github.com/vangav/vos_geo_server/blob/master/app/com/vangav/vos_geo_server/controllers/reverse_geo_code/ResponseReverseGeoCode.java) classes per-entry-point as defined in a [controllers.json](https://github.com/vangav/vos_geo_server/blob/master/generator_config/controllers.json) file. |
| [ControllersJson](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/controllers_generator/json/ControllersJson.java), [ControllerJson](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/controllers_generator/json/ControllerJson.java), [RequestParamJson](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/controllers_generator/json/RequestParamJson.java) and [ResponseParamJson](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/controllers_generator/json/ResponseParamJson.java) | Maps [controllers.json](https://github.com/vangav/vos_geo_server/blob/master/generator_config/controllers.json) files. |

### [param](https://github.com/vangav/vos_backend/tree/master/src/com/vangav/backend/play_framework/param)

+ This sub-package handles representing, parsing and validating an incoming request's params.

| Class | Explanation |
| ----- | ----------- |
| [ParamType](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/param/ParamType.java) | Represents a param's type (e.g.: BOOLEAN, DOUBLE, LONGITUDE, DATE, ACCESS_TOKEN, PHONE_NUMBER, IOS_DEVICE_TOKEN, etc ...). |
| [ParamOptionality](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/param/ParamOptionality.java) | Used to define a param as OPTIONAL or MANDATORY. |
| [ParamParsersInl](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/param/ParamParsersInl.java) | Has inline static methods for parsin incoming JSON primitive types into param's non-JSON types. |
| [ParamValidatorInl](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/param/ParamValidatorInl.java) | Used to validate incoming request's params and throws bad request exceptions for mandatory invalid params. |
| [ParamValidatorProperties](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/param/ParamValidatorProperties.java) | Map [param_validator_properties.prop](https://github.com/vangav/vos_backend/blob/master/prop/param_validator_properties.prop) properties file. |

### [request](https://github.com/vangav/vos_backend/tree/master/src/com/vangav/backend/play_framework/request)

+ This sub-package represents requests' headers, body, response, state in addition to some info like thrown exceptions, start/end time, state, ...

+ [Request](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java) is the primary Object to be dealt with to implement the logic of a generated Vangav Backend REST Service in controllers' Handler classes like in [vos_calculate_sum](https://github.com/vangav/vos_calculate_sum/blob/master/app/com/vangav/vos_calculate_sum/controllers/calculate_sum/HandlerCalculateSum.java#L86) and [vos_geo_server](https://github.com/vangav/vos_geo_server/blob/master/app/com/vangav/vos_geo_server/controllers/reverse_geo_code/HandlerReverseGeoCode.java#L96). Here's an index for the public methods provided by [Request](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java) class:

| method | explanation |
| ------ | ----------- |
| [`getStartTime`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L130) | Returns the unix time stamp (milliseconds since epoch) when processing this request started. |
| [`getStartCalendar`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L139) | Returns a Calendar Object reflecting when processing this request started. |
| [`endRequest`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L150) | *Call this method only if you are sure you need it.* This method gets automatically called upon sending back the request's response which sets the request's [`endTime`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L73) and [`execTime`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L74). |
| [`getEndTime`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L160) | Returns the unix time stamp when the request's response was sent. Usually only useful to call in after-response methods such as [`afterProcessing`](https://github.com/vangav/vos_geo_server/blob/master/app/com/vangav/vos_geo_server/controllers/CommonPlayHandler.java#L83). |
| [`getExecTime`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L169) | Returns the number of milliseconds it took from receiving the request till sending back the response. |
| [`getRequestId`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L174) | Each request gets a UUID. Can be used in many ways (e.g.: logging, tracing exceptions, etc ...). |
| [`getRequestHeader`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L183) | Returns a [RequestHeader](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/RequestHeader.java) Object offering [`getRemoteAddress`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/RequestHeader.java#L88), [`getRequestType`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/RequestHeader.java#L97), [`getUserAgent`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/RequestHeader.java#L106), [`getHttpAccept`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/RequestHeader.java#L115) and [`getHeaders`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/RequestHeader.java#L124). |
| [`getRequestJsonBody`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L192) | Returns a [RequestJsonBody](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/RequestJsonBody.java) Object (cast it to controller's Request Object) offering [`getUserId`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/RequestJsonBody.java#L103) which should be overriden per-controller's request in case the request has a user-uuid as one of its params and [`isValidParam`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/RequestJsonBody.java#L224) which is used to check if an optional param is valid or not. |
| [`getResponseBody`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L201) | Returns a [ResponseBody](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/response/ResponseBody.java) Object (cast it to controller's Response Object). Used to set response's params at the end of each controller-handler's [`processRequest`](https://github.com/vangav/vos_geo_server/blob/master/app/com/vangav/vos_geo_server/controllers/reverse_geo_code/HandlerReverseGeoCode.java#L96) method. |
| [`getDispatcher`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L210) | Returns a [Dispatcher](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/dispatcher/Dispatcher.java) Object offering [`addDispatchMessage`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/dispatcher/Dispatcher.java#L193) used to enqueue dispatch messages any time during the request processing (before and after response) and those messages get dispatched automatically at the end of processing a request. To use this functionality a service has to have a worker service too (just enter **`Y`** during service generation when asked to add a worker service. Then make sure to run this worker service as well as the main service. |
| [`getControllerName`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L219) | Returns the controller's name. Can be used for logging, analysis, etc ... |
| [`setUserId`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L231) | For example on new user signup this method is used to set the new user's uuid. |
| [`getUserId`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L241) | Used to get the uuid of the user issuing the request if the uuid was already set through overriding [`getUserId`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/RequestJsonBody.java#L103) or invoking [`setUserId`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L231), otherwise it returns the default [`uuid`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/RequestJsonBody.java#L94).  |
| [`getState`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L277) | Invoking this method in any after-response method returns the request's state ([`OK`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/RequestState.java#L59), [`BAD_REQUEST`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/RequestState.java#L60), [`INTERNAL_SERVER_ERROR`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/RequestState.java#L61)). Can be used for logging, analysis, etc ... |
| [`getVangavExceptions`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L299) [`getTheLastVangavException`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L311) [`getExceptions`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L337) [`getTheLastException`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L348) [`getAllExceptionsAsString`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L364) | Are used to log/analyze/report problems. Usually combined with other methods like `getRequestId`, `getUserId`, `getState`, etc ... to track problems as they occur. |
| [`addVangavException`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L288) [`addException`](https://github.com/vangav/vos_backend/blob/master/src/com/vangav/backend/play_framework/request/Request.java#L327) | Any thrown Exception gets automatically added to the request's exceptions through these methods, however calling these methods can be useful for caught non-fatal exceptions thrown by the service's logic written by you. Any exception thrown by Vangav Backend gets added to the request's exceptions automatically. |

